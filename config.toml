# WireGuard Failover Configuration File
# This file should be placed in /etc/wg-failover/config.toml
#
# Features:
# - Automatic failover when interface connectivity is lost
# - Speed-based optimization to use faster connections
# - Anti-flapping protection (30s minimum between switches)
# - Auto-recovery to primary when both interfaces are available

# WireGuard peer to monitor
[peer]
# Public IP address or hostname of the WireGuard peer to ping
ip = "206.189.140.174"
# Number of ping attempts
count = 2
# Ping timeout in seconds
timeout = 2

# WireGuard interface settings
[wireguard]
# Name of the WireGuard interface
interface = "wg0"

# Network interfaces
[interfaces]
# Primary network interface (preferred for auto-recovery)
primary = "em3"
# Secondary network interface (fallback for automatic failover)
secondary = "em4"

# Monitoring settings
[monitoring]
# Check interval in seconds (connectivity monitoring)
interval = 30
# Speed test interval in seconds (default: 3600 = 1 hour)
speedtest_interval = 3600
# Speed threshold percentage to switch to faster interface (default: 35)
speed_threshold = 35
# Minimum switch interval in seconds to prevent flapping (default: 30)
min_switch_interval = 1800
# Number of ping attempts for speed tests (default: 3)
speed_test_count = 3
# Ping timeout in seconds for speed tests (default: 5)
speed_test_timeout = 5
# Log level: "error", "warn", "info", "debug", "trace"
log_level = "info"
# Log file path (leave empty for stdout)
log_file = "/var/log/wg-failover.log"
# Use TCP connection test instead of ping
use_tcp = false
# TCP port to check if use_tcp is true (default: 443)
tcp_port = 443

# Notification settings
[notifications]
# Enable notifications
enabled = false
# Send email on interface switch
email = false
# Email settings
email_to = ""
email_from = ""
smtp_server = ""
smtp_port = 587
smtp_username = ""
smtp_password = ""
